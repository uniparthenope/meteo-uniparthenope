<Page loaded="pageLoaded" class="page" xmlns="http://www.nativescript.org/tns.xsd" xmlns:chart="nativescript-ui-chart"  xmlns:dd="nativescript-drop-down">
    <ActionBar class="blue_background_action_bar" flat="true">
        <Label text="{{ titolo }}" fontSize="20"></Label>
    </ActionBar>

    <ScrollView height="100%">
        <StackLayout orientation="vertical" verticalAlignment="top" margin="10 10 10 10">
            <StackLayout class="blue_background_opac" >
                <FlexboxLayout flexWrap="wrap" flexDirection="row" margin="10 10 5 10">
                    <Label text="TEMPERATURA:" verticalAlignment="center" style="font-weight:bold; flex-grow:1" />
                    <Label text="{{ temperatura }}" verticalAlignment="center" style="font-weight:bold;"/>
                </FlexboxLayout>

                <FlexboxLayout flexWrap="wrap" flexDirection="row" marginTop="20" margin="5 10 5 10">
                    <Label text="METEO:" verticalAlignment="center" style="font-weight:bold; flex-grow:1" />
                    <Label text="{{ meteo }}" verticalAlignment="center" style="font-weight:bold;"/>
                </FlexboxLayout>

                <FlexboxLayout flexWrap="wrap" flexDirection="row" marginTop="20" margin="5 10 5 10">
                    <Label text="NUVOLOSITÀ:" verticalAlignment="center" style="font-weight:bold; flex-grow:1" />
                    <Label text="{{ cloud }}" verticalAlignment="center" style="font-weight:bold;"/>
                </FlexboxLayout>

                <FlexboxLayout flexWrap="wrap" flexDirection="row" marginTop="20" margin="5 10 5 10">
                    <Label text="UMIDITÀ:" verticalAlignment="center" style="font-weight:bold; flex-grow:1" />
                    <Label text="{{ humidity }}" verticalAlignment="center" style="font-weight:bold;"/>
                </FlexboxLayout>

                <FlexboxLayout flexWrap="wrap" flexDirection="row" marginTop="20" margin="5 10 5 10">
                    <Label text="PRESSIONE:" verticalAlignment="center" style="font-weight:bold; flex-grow:1" />
                    <Label text="{{ pressione }}" verticalAlignment="center" style="font-weight:bold;"/>
                </FlexboxLayout>

                <FlexboxLayout flexWrap="wrap" flexDirection="row" marginTop="20" margin="5 10 5 10">
                    <Label text="DIREZIONE VENTO:" verticalAlignment="center" style="font-weight:bold; flex-grow:1" />
                    <Label text="{{ wind_direction }}" verticalAlignment="center" style="font-weight:bold;"/>
                </FlexboxLayout>

                <FlexboxLayout flexWrap="wrap" flexDirection="row" marginTop="20" margin="5 10 5 10">
                    <Label text="VELOCITÀ VENTO:" verticalAlignment="center" style="font-weight:bold; flex-grow:1" />
                    <Label text="{{ wind_speed }}" verticalAlignment="center" style="font-weight:bold;"/>
                </FlexboxLayout>

                <FlexboxLayout flexWrap="wrap" flexDirection="row" marginTop="20" margin="5 10 5 10">
                    <Label text="TEMPERATURA PERCEPITA:" verticalAlignment="center" style="font-weight:bold; flex-grow:1" />
                    <Label text="{{ wind_chill }}" verticalAlignment="center" style="font-weight:bold;"/>
                </FlexboxLayout>

                <FlexboxLayout flexWrap="wrap" flexDirection="row" marginTop="20" margin="5 10 10 10">
                    <Label text="VENTO:" verticalAlignment="center" style="font-weight:bold; flex-grow:1" />
                    <Label text="{{ wind }}" verticalAlignment="center" style="font-weight:bold;"/>
                </FlexboxLayout>
            </StackLayout>

            <StackLayout class="blue_background_opac" marginTop="20">
                <FlexboxLayout flexDirection="row">
                    <!-- Use even flexGrow to achieve uniform grid -->
                    <Label flexGrow="1" class="font-weight-bold text-center" text="Forecast" width="40%"/>
                    <StackLayout flexGrow="1" class="font-weight-bold text-center" width="15%">
                        <Label text="T Min"/>
                        <Label text="(°C)"></Label>
                    </StackLayout>
                    <StackLayout flexGrow="1" class="font-weight-bold text-center" width="15%">
                        <Label text="T Max"/>
                        <Label text="(°C)"></Label>
                    </StackLayout>
                    <StackLayout flexGrow="1" class="font-weight-bold text-center" width="15%">
                        <Label text="Vento"/>
                        <Label text="(Kn)"></Label>
                    </StackLayout>
                    <StackLayout flexGrow="1" class="font-weight-bold text-center" width="15%">
                        <Label text="Pioggia"/>
                        <Label text="(mm)"></Label>
                    </StackLayout>
                </FlexboxLayout>

                <ListView items="{{ statistic }}" orientation="vertical" marginTop="10" height="270" margin="10 5 5 5">
                    <ListView.itemTemplate>
                        <FlexboxLayout flexDirection="row">
                            <StackLayout flexGrow="1" class="font-weight-bold text-center" width="40%">
                                <Label text="{{ forecast }}"/>
                                <Image src="{{ image }}" height="25" width="15"></Image>
                            </StackLayout>
                            <Label text="{{ TMin }}" flexGrow="1" class="font-weight-bold text-center" width="15%"/>
                            <Label text="{{ TMax }}" flexGrow="1" class="font-weight-bold text-center" width="15%"/>
                            <Label text="{{ Wind }}" flexGrow="1" class="font-weight-bold text-center" width="15%"/>
                            <Label text="{{ Rain }}" flexGrow="1" class="font-weight-bold text-center" width="15%"/>
                        </FlexboxLayout>
                    </ListView.itemTemplate>
                </ListView>
            </StackLayout>

            <StackLayout orientation="vertical" marginTop="20">
                <StackLayout margin="5 5 5 5">
                    <dd:DropDown
                            items="{{ products }}" selectedIndex="{{ selectedIndex }}"
                            hint = "{{ hint_prod }}"
                            selectedValue = "{{ selectedValue }}"
                                 opened="dropDownOpened" closed="dropDownClosed"
                                 selectedIndexChanged="dropDownSelectedIndexChanged"
                                 row="0" colSpan="2" />
                </StackLayout>

                <StackLayout margin="5 5 5 5">
                    <dd:DropDown items="{{ outputs }}" selectedIndex="{{ selectedIndex1 }}"
                                 hint="{{ hint_output }}"
                                 opened="dropDownOpened1" closed="dropDownClosed1"
                                 selectedIndexChanged="dropDownSelectedIndexChanged1"
                                 row="0" colSpan="2" />
                </StackLayout>
            </StackLayout>

            <Image src="{{ map }}" marginTop="20" />

            <chart:RadCartesianChart height="350" marginTop="20" seriesSelectionMode="Multiple">
                <chart:RadCartesianChart.series>
                    <chart:BarSeries
                            seriesName="Temp"
                            legendTitle="Temperatura (°C)"
                            items="{{ temp }}"
                            categoryProperty="key"
                            valueProperty="val"
                            showLabels="false">
                        <chart:BarSeries.labelStyle>
                            <chart:BarSeriesStyle margin="10" fontStyle="Bold"/>
                        </chart:BarSeries.labelStyle>
                        <chart:BarSeries.horizontalAxis>
                            <chart:CategoricalAxis labelFitMode="Multiline" labelTextColor="rgba(30,76,117,1)"/>
                        </chart:BarSeries.horizontalAxis>
                        <chart:BarSeries.verticalAxis>
                            <chart:LinearAxis labelFormat="%.0f" labelTextColor="rgba(30,76,117,1)"/>
                        </chart:BarSeries.verticalAxis>
                    </chart:BarSeries>
                    <chart:LineSeries
                            seriesName="Press"
                            legendTitle="Pressione (hPa)"
                            items="{{ press }}"
                            categoryProperty="key"
                            valueProperty="val"
                            showLabels="false">
                        <chart:LineSeries.labelStyle>
                            <chart:LineSeriesStyle margin="10" fontStyle="Bold"/>
                        </chart:LineSeries.labelStyle>
                        <chart:LineSeries.horizontalAxis>
                            <chart:CategoricalAxis labelFitMode="Rotate" hidden="true" verticalLocation="Down" zPosition="0"/>
                        </chart:LineSeries.horizontalAxis>
                        <chart:LineSeries.verticalAxis>
                            <chart:LinearAxis horizontalLocation="Right" labelFormat="%.0f" labelTextColor="rgba(30,76,117,1)"/>
                        </chart:LineSeries.verticalAxis>
                    </chart:LineSeries>
                </chart:RadCartesianChart.series>

                <chart:RadCartesianChart.legend>
                    <chart:RadLegendView position="Top" enableSelection="true"/>
                </chart:RadCartesianChart.legend>


                <chart:RadCartesianChart.palettes>
                    <chart:Palette seriesName="Temp">
                        <chart:Palette.entries>
                            <chart:PaletteEntry fillColor="rgba(117,145,167,1)" strokeColor="rgba(117,145,167,1)"/>
                        </chart:Palette.entries>
                    </chart:Palette>


                    <chart:Palette seriesName="Press">
                        <chart:Palette.entries>
                            <chart:PaletteEntry
                                    android:fillColor="rgba(30,76,117,1)"
                                    ios:fillColor="rgba(30,76,117,1)"
                                    strokeColor="rgba(30,76,117,1)" strokeWidth="3"
                                    android:strokeWidth="6" />
                        </chart:Palette.entries>
                    </chart:Palette>
                </chart:RadCartesianChart.palettes>
            </chart:RadCartesianChart>
        </StackLayout>
    </ScrollView>
</Page>