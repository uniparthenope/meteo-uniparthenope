<Page actionBarHidden="true" xmlns="http://schemas.nativescript.org/tns.xsd" xmlns:sd="nativescript-ui-sidedrawer" loaded="pageLoaded" xmlns:lv="nativescript-ui-autocomplete" xmlns:x="nativescript-statusbar">
    <ActionBar title="MeteoUniparthenope"/>

    <x:StatusBar ios:barStyle="light" barColor="rgba(30,76,117,1)" />

    <sd:RadSideDrawer id="sideDrawer">
        <sd:RadSideDrawer.drawerContent>
            <ScrollView>
                <StackLayout class="white_background">
                    <Image src="~/images/logo.png" margin="5 5 5 5" horizontalAlignment="center"></Image>
                    <Label text="{{ _L('home_preferiti') }}" verticalAlignment="center" horizontalAlignment="left" style=" flex-grow:1; font-size: 18" marginLeft="15" marginTop="20"/>

                    <ListView
                            items="{{ myPref }}"
                            itemTap="onItemTap"
                            class="list-group"
                            id="listView"
                            row="2">
                        <ListView.itemTemplate>
                            <StackLayout class="list-group-item">
                                <Label text="{{ title }}" textWrap="true" color="rgba(30,76,117,1)"/>
                            </StackLayout>
                        </ListView.itemTemplate>
                    </ListView>

                    <Label text="{{ _L('home_selezione_data') }}" verticalAlignment="center" horizontalAlignment="left" style=" flex-grow:1; font-size: 18" marginLeft="15" marginTop="20"/>
                    <DatePicker class="blue_col" id="datePicker" loaded="onDatePickerLoaded" date="{{ date_pick }}" minDate="{{ minDate }}" maxDate="{{ maxDate }}"></DatePicker>
                    <StackLayout margin="0 20 0 20" height="4px" backgroundColor="rgba(30,76,117,1)" marginBottom="20" />
                    <Label text="{{ _L('home_impostazioni') }}" tap="onTapSettings" verticalAlignment="center" horizontalAlignment="left" style=" flex-grow:1; font-size: 18" marginLeft="15" marginBottom="15" />
                    <Label text="Info" tap="onTapInfo" verticalAlignment="center" horizontalAlignment="left" style="flex-grow:1; font-size: 18" marginLeft="15"/>
                </StackLayout>
            </ScrollView>
        </sd:RadSideDrawer.drawerContent>

        <sd:RadSideDrawer.mainContent>
            <StackLayout>
                <GridLayout rows="*,auto" columns="*" verticalAlignment="top" width="100%" height="100%">
                    <ContentView row="0" col="0" rowSpan="3" class="map">
                        <web-view id="webView"></web-view>
                    </ContentView>

                    <StackLayout height="30" orientation="vertical" verticalAlignment="center" horizontalAlignment="left" tap="toggleDrawer">
                        <Image src="~/images/arrow.png"></Image>
                    </StackLayout>

                    <StackLayout class="blue_background" marginLeft="10" marginTop="12" orientation="vertical" horizontalAlignment="left" verticalAlignment="top" visibility="{{current_position}}" row="0" col="0" width="220">
                        <StackLayout verticalAlignment="center" horizontalAlignment="center">
                            <Label text="{{ position }}" style="font-weight:bold; flex-grow:1; font-size: 16" margin="5 5 0 5"/>
                        </StackLayout>

                        <StackLayout orientation="horizontal" marginTop="5">
                            <StackLayout orientation="horizontal" verticalAlignment="center" horizontalAlignment="left" height="50" width="70">
                                <Image src="{{ icon }}" height="50" margin="0 10 0 10"/>
                            </StackLayout>

                            <StackLayout orientation="vertical" verticalAlignment="center" horizontalAlignment="center" marginLeft="18">
                                <Label text="{{ temp }}"  style="font-size: 24"/>

                                <StackLayout orientation="horizontal" marginTop="5">
                                    <Label text="{{ wind_direction }}" style="font-weight:bold;" marginRight="10"/>
                                    <Label text="{{ wind }}"/>
                                </StackLayout>
                            </StackLayout>
                        </StackLayout>

                        <StackLayout orientation="horizontal" horizontalAlignment="center" marginTop="5">
                            <Image src="~/images/star.png" height="20" tap="onTapStar" visibility="{{ no_pref }}"></Image>
                            <Image src="~/images/star_pref.png" height="20" tap="onTapStar" visibility="{{ pref }}"></Image>
                            <Image src="~/images/location.png" height="20" tap="onTapCenter" marginLeft="40"></Image>
                            <Image src="~/images/details_button.png" height="20" marginLeft="40" tap="onTapDetail"></Image>
                        </StackLayout>

                        <StackLayout xmlns:lv="nativescript-ui-autocomplete" verticalAlignment="top" horizontalAlignment="center" row="0" col="0" margin="0 0 0 10" width="210">
                            <lv:RadAutoCompleteTextView hint="{{ _L('home_ricerca') }}" id="autocomplete" items="{{ posti }}" completionMode="Contains" suggestMode="Suggest" textChanged="onTextChanged" didAutoComplete="didAutoComplete">
                                <lv:RadAutoCompleteTextView.suggestionView>
                                    <lv:SuggestionView suggestionViewHeight="150" class="blue_col">
                                        <lv:SuggestionView.suggestionItemTemplate>
                                            <StackLayout orientation="vertical" padding="10" class="blue_col">
                                                <Label text="{{ text }}"></Label>
                                            </StackLayout>
                                        </lv:SuggestionView.suggestionItemTemplate>
                                    </lv:SuggestionView>
                                </lv:RadAutoCompleteTextView.suggestionView>
                            </lv:RadAutoCompleteTextView>
                        </StackLayout>
                    </StackLayout>

                    <StackLayout class="blue_background" marginLeft="10" marginTop="12" orientation="vertical" horizontalAlignment="left" verticalAlignment="top" visibility="{{search}}" row="0" col="0"  height="50" width="220" tap="onTapCenter">
                        <StackLayout xmlns:lv="nativescript-ui-autocomplete" verticalAlignment="center" horizontalAlignment="center" row="0" col="0" margin="0 10 0 10" width="210">
                            <lv:RadAutoCompleteTextView hint="{{ _L('home_ricerca') }}" id="autocomplete" items="{{ posti }}" completionMode="Contains" suggestMode="Suggest" textChanged="onTextChanged" didAutoComplete="didAutoComplete">
                                <lv:RadAutoCompleteTextView.suggestionView>
                                    <lv:SuggestionView suggestionViewHeight="150" class="blue_col">
                                        <lv:SuggestionView.suggestionItemTemplate>
                                            <StackLayout orientation="vertical" padding="10" class="blue_col">
                                                <Label text="{{ text }}"></Label>
                                            </StackLayout>
                                        </lv:SuggestionView.suggestionItemTemplate>
                                    </lv:SuggestionView>
                                </lv:RadAutoCompleteTextView.suggestionView>
                            </lv:RadAutoCompleteTextView>
                        </StackLayout>
                    </StackLayout>

                    <StackLayout orientation="vertical" horizontalAlignment="center" verticalAlignment="bottom" >
                        <StackLayout margin="0 10 15 10" class="blue_background" row="0" col="0" orientation="horizontal" height="50" horizontalAlignment="center">
                            <StackLayout orientation="horizontal" horizontalAlignment="left" tap="onTapBack" verticalAlignment="center" marginLeft="15" marginRight="15">
                                <Image src="~/images/back.png" height="40"></Image>
                            </StackLayout>

                            <StackLayout horizontalAlignment="center" tap="toggleDrawer" verticalAlignment="center">
                                <Label text="{{ data }}"></Label>
                            </StackLayout>

                            <StackLayout orientation="horizontal" horizontalAlignment="right" tap="onTapNext" verticalAlignment="center" marginLeft="15" marginRight="15">
                                <Image src="~/images/next1.png" height="40"></Image>
                            </StackLayout>
                        </StackLayout>

                        <StackLayout>
                            <Image opacity="0.9" src="~/images/colorbar/bar_temp_windy.png"  visibility="{{ layer_temp}}"></Image>
                            <Image opacity="0.9" src="~/images/colorbar/bar_nuvole_windy.png"  visibility="{{ layer_nuvole }}"></Image>
                            <Image opacity="0.8" src="~/images/colorbar/bar_pioggia_windy.png"  visibility="{{ layer_pioggia }}"></Image>
                            <Image opacity="0.8" src="~/images/colorbar/bar_neve_windy.png"  visibility="{{ layer_neve }}"></Image>
                            <Image opacity="0.8" src="~/images/colorbar/bar_vento_windy.png"  visibility="{{ layer_vento }}"></Image>
                        </StackLayout>
                    </StackLayout>
                </GridLayout>
            </StackLayout>
        </sd:RadSideDrawer.mainContent>
    </sd:RadSideDrawer>

</Page>